<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sessions</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<style>
body{margin:0;display:flex;font-family:Arial;background:#f3f5f8;}
.sidebar{width:260px;background:#1565c0;height:100vh;padding:25px;color:white;}
.menu-item{padding:12px;margin:8px;background:rgba(255,255,255,0.15);border-radius:6px;cursor:pointer;}
.menu-item:hover{background:rgba(255,255,255,0.25);}
.content{padding:30px;width:100%;}
.session-box{
    background:white;
    padding:18px;
    border-radius:8px;
    margin-bottom:12px;
    box-shadow:0 2px 8px rgba(0,0,0,0.08);
}
.btn{
    padding:8px 14px;
    background:#1565c0;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
}
.btn:hover{background:#0c4296;}
</style>
</head>

<body>

<div class="sidebar">
    <h2>Professeur</h2>
    <div class="menu-item" onclick="go('teacher_home.html')">ðŸ“˜ Cours</div>
    <div class="menu-item" onclick="go('teacher_session_create.html')">âž• CrÃ©er session</div>
</div>

<div class="content">
    <h1>Liste des sessions</h1>
    <div id="sessions">Chargement...</div>
</div>

<script>
function go(p){window.location.href=p;}

function loadSessions(){
    $.get("../../../backend/api/professor/getSessions.php", function(res){

        if(!res.success){
            $("#sessions").html("Erreur : " + res.message);
            return;
        }

        if(res.data.length === 0){
            $("#sessions").html("Aucune session trouvÃ©e.");
            return;
        }

        let html = "";
        res.data.forEach(s=>{
            html += `
                <div class="session-box">
                    <b>${s.course_code} â€” ${s.course_title}</b><br>
                    ðŸ“… ${s.session_date}<br><br>
                    <button class="btn" onclick="go('teacher_take_attendance.html?session=${s.id}')">
                        Prendre la prÃ©sence
                    </button>
                </div>
            `;
        });

        $("#sessions").html(html);
    }).fail(function(xhr){
        console.log(xhr.responseText);
        $("#sessions").html("Erreur serveur.");
    });
}

loadSessions();
</script>

</body>
</html>
